<p-toast />

<div class="card-container">

  <div class="category-header">
  <div class="header-left">
    <h1 class="title">My Lend Requests</h1>
    <p class="subtitle">All request you have made for products</p>
  </div>
  <p class="count-badge">
    {{ BuyRequestOfUser.length }} Requests
  </p>
</div>

@if (BuyRequestOfUser.length == 0) {
  <div class="no-buy-request">
    <img src="https://media.geeksforgeeks.org/auth-dashboard-uploads/not_found_mentor.svg" alt="No Lend Request">
    <p>No requests.</p>
  </div>
}
@else {
  <div class="table-section">
    <p-table [value]="BuyRequestOfUser" stripedRows [responsiveLayout]="'scroll'" dataKey="id">
      <ng-template pTemplate="header">
        <tr>
          <th>Name</th>
          <th>Request Status</th>
          <th>Requested On</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-req>
        <tr>
          <td>{{ req.product.product.name }}</td>
          <td class="label"
              [ngClass]="{
                'pending': req.buy_request.status == 0,
                'accepted': req.buy_request.status == 1,
                'rejected': req.buy_request.status == 2
              }"
          ><span>{{ req.buy_request.status | buyStatus }}</span></td>
          <td>{{ req.buy_request.created_at.split('T')[0] }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
}
</div>

@if (isLoading) {
  <div class="loading-overlay">
    <app-loader [isLoading]="isLoading"></app-loader>
  </div>
}
